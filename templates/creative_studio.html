{% extends "base_nexora.html" %}

{% block title %}Creative Studio - Nexora Prime{% endblock %}

{% block extra_head %}
<style>
    .creative-studio {
        background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%);
        min-height: 100vh;
        padding: 20px;
    }
    
    .studio-card {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 20px;
    }
    
    .creative-preview {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 12px;
        padding: 20px;
        min-height: 300px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px dashed rgba(255, 255, 255, 0.2);
    }
    
    .creative-preview.has-content {
        border-style: solid;
        border-color: rgba(99, 102, 241, 0.3);
    }
    
    .copy-variation {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .copy-variation:hover {
        background: rgba(99, 102, 241, 0.1);
        border-color: rgba(99, 102, 241, 0.3);
    }
    
    .copy-variation.selected {
        border-color: #6366f1;
        box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
    }
    
    .copy-headline {
        font-size: 1.1rem;
        font-weight: 600;
        color: #fff;
        margin-bottom: 8px;
    }
    
    .copy-body {
        font-size: 0.9rem;
        color: rgba(255, 255, 255, 0.7);
        margin-bottom: 8px;
    }
    
    .copy-cta {
        display: inline-block;
        padding: 6px 16px;
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        border-radius: 6px;
        font-size: 0.875rem;
        font-weight: 600;
        color: #fff;
    }
    
    .copy-score {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .score-bar {
        flex: 1;
        height: 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        overflow: hidden;
    }
    
    .score-fill {
        height: 100%;
        border-radius: 3px;
    }
    
    .score-fill.high { background: linear-gradient(90deg, #10b981, #14b8a6); }
    .score-fill.medium { background: linear-gradient(90deg, #f59e0b, #f97316); }
    .score-fill.low { background: linear-gradient(90deg, #ef4444, #f43f5e); }
    
    .platform-selector {
        display: flex;
        gap: 12px;
        margin-bottom: 20px;
    }
    
    .platform-btn {
        padding: 12px 24px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.7);
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .platform-btn:hover, .platform-btn.active {
        background: rgba(99, 102, 241, 0.2);
        border-color: rgba(99, 102, 241, 0.5);
        color: #fff;
    }
    
    .platform-btn i {
        font-size: 1.25rem;
    }
    
    .tone-selector {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }
    
    .tone-chip {
        padding: 8px 16px;
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.875rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .tone-chip:hover, .tone-chip.active {
        background: rgba(99, 102, 241, 0.2);
        border-color: #6366f1;
        color: #fff;
    }
    
    .ab-test-card {
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
        border: 1px solid rgba(99, 102, 241, 0.3);
        border-radius: 12px;
        padding: 20px;
    }
    
    .ab-variant {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 10px;
        padding: 16px;
        margin-bottom: 12px;
    }
    
    .ab-variant-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 12px;
    }
    
    .ab-variant-label {
        font-weight: 600;
        color: #fff;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .ab-variant-label .badge {
        font-size: 0.75rem;
    }
    
    .btn-generate {
        background: linear-gradient(135deg, #f59e0b, #f97316);
        border: none;
        color: #fff;
        padding: 14px 28px;
        border-radius: 10px;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .btn-generate:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
    }
    
    .image-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
    }
    
    .image-concept {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        padding: 12px;
        text-align: center;
        border: 1px solid rgba(255, 255, 255, 0.1);
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .image-concept:hover {
        border-color: rgba(99, 102, 241, 0.5);
        transform: scale(1.02);
    }
    
    .image-concept.selected {
        border-color: #6366f1;
        box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
    }
    
    .image-placeholder {
        width: 100%;
        aspect-ratio: 1;
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2));
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 8px;
    }
    
    .image-placeholder i {
        font-size: 2rem;
        color: rgba(255, 255, 255, 0.3);
    }
    
    .form-control-dark {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: #fff;
        border-radius: 10px;
        padding: 12px 16px;
    }
    
    .form-control-dark:focus {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(99, 102, 241, 0.5);
        color: #fff;
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
    }
    
    .form-control-dark::placeholder {
        color: rgba(255, 255, 255, 0.4);
    }
    
    .form-label-light {
        color: rgba(255, 255, 255, 0.8);
        font-weight: 500;
        margin-bottom: 8px;
    }
</style>
{% endblock %}

{% block content %}
<div class="creative-studio">
    <div class="container-fluid">
        <!-- Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h1 class="text-white mb-1">
                    <i class="fas fa-palette me-2" style="color: #f59e0b;"></i>
                    Creative Studio
                </h1>
                <p class="text-white-50 mb-0">Gera√ß√£o autom√°tica de criativos com Intelig√™ncia Artificial</p>
            </div>
            <div class="d-flex gap-3">
                <button class="btn btn-outline-light">
                    <i class="fas fa-history me-2"></i>Hist√≥rico
                </button>
                <button class="btn btn-outline-light">
                    <i class="fas fa-folder me-2"></i>Biblioteca
                </button>
            </div>
        </div>
        
        <div class="row">
            <!-- Configura√ß√£o -->
            <div class="col-lg-4">
                <div class="studio-card">
                    <h5 class="text-white mb-4">
                        <i class="fas fa-cog me-2"></i>Configura√ß√£o
                    </h5>
                    
                    <div class="mb-4">
                        <label class="form-label-light">Plataforma</label>
                        <div class="platform-selector">
                            <div class="platform-btn active" data-platform="facebook">
                                <i class="fab fa-facebook"></i>
                                Facebook
                            </div>
                            <div class="platform-btn" data-platform="instagram">
                                <i class="fab fa-instagram"></i>
                                Instagram
                            </div>
                            <div class="platform-btn" data-platform="google">
                                <i class="fab fa-google"></i>
                                Google
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label-light">Nome do Produto</label>
                        <input type="text" class="form-control form-control-dark" id="productName" placeholder="Ex: Fone de Ouvido Bluetooth">
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label-light">Descri√ß√£o do Produto</label>
                        <textarea class="form-control form-control-dark" id="productDescription" rows="3" placeholder="Descreva as principais caracter√≠sticas e benef√≠cios..."></textarea>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label-light">P√∫blico-Alvo</label>
                        <input type="text" class="form-control form-control-dark" id="targetAudience" placeholder="Ex: Jovens 18-35 anos, interessados em tecnologia">
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label-light">Tom de Voz</label>
                        <div class="tone-selector">
                            <div class="tone-chip active" data-tone="professional">Profissional</div>
                            <div class="tone-chip" data-tone="casual">Casual</div>
                            <div class="tone-chip" data-tone="urgent">Urgente</div>
                            <div class="tone-chip" data-tone="friendly">Amig√°vel</div>
                            <div class="tone-chip" data-tone="luxury">Luxo</div>
                            <div class="tone-chip" data-tone="fun">Divertido</div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label-light">N√∫mero de Varia√ß√µes</label>
                        <select class="form-control form-control-dark" id="numVariations">
                            <option value="3">3 varia√ß√µes</option>
                            <option value="5" selected>5 varia√ß√µes</option>
                            <option value="10">10 varia√ß√µes</option>
                        </select>
                    </div>
                    
                    <button class="btn-generate w-100" onclick="generateCreatives()">
                        <i class="fas fa-magic me-2"></i>Gerar Criativos com IA
                    </button>
                </div>
            </div>
            
            <!-- Varia√ß√µes de Copy -->
            <div class="col-lg-4">
                <div class="studio-card">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h5 class="text-white mb-0">
                            <i class="fas fa-file-alt me-2"></i>Varia√ß√µes de Copy
                        </h5>
                        <span class="badge bg-primary">5 geradas</span>
                    </div>
                    
                    <div id="copyVariations">
                        <div class="copy-variation selected">
                            <div class="copy-headline">üéß Qualidade de Som Premium por Menos!</div>
                            <div class="copy-body">Experimente √°udio cristalino com nosso fone Bluetooth. Bateria de 40h, cancelamento de ru√≠do ativo e conforto o dia todo.</div>
                            <div class="copy-cta">Comprar Agora</div>
                            <div class="copy-score">
                                <span class="text-white-50 small">Score: 92%</span>
                                <div class="score-bar">
                                    <div class="score-fill high" style="width: 92%;"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="copy-variation">
                            <div class="copy-headline">Transforme Sua Experi√™ncia Musical üéµ</div>
                            <div class="copy-body">Descubra o som que voc√™ merece. Tecnologia de ponta, design ergon√¥mico e pre√ßo que cabe no bolso.</div>
                            <div class="copy-cta">Saiba Mais</div>
                            <div class="copy-score">
                                <span class="text-white-50 small">Score: 88%</span>
                                <div class="score-bar">
                                    <div class="score-fill high" style="width: 88%;"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="copy-variation">
                            <div class="copy-headline">‚ö° Oferta Rel√¢mpago: 40% OFF</div>
                            <div class="copy-body">√öltimas unidades! Fone Bluetooth Premium com frete gr√°tis. N√£o perca essa oportunidade √∫nica.</div>
                            <div class="copy-cta">Aproveitar</div>
                            <div class="copy-score">
                                <span class="text-white-50 small">Score: 85%</span>
                                <div class="score-bar">
                                    <div class="score-fill high" style="width: 85%;"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="copy-variation">
                            <div class="copy-headline">O Fone Que Entende Voc√™</div>
                            <div class="copy-body">Conex√£o instant√¢nea, som imersivo e design que combina com seu estilo. Feito para quem n√£o aceita menos.</div>
                            <div class="copy-cta">Ver Detalhes</div>
                            <div class="copy-score">
                                <span class="text-white-50 small">Score: 79%</span>
                                <div class="score-bar">
                                    <div class="score-fill medium" style="width: 79%;"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="copy-variation">
                            <div class="copy-headline">Liberdade Sem Fios, Qualidade Sem Limites</div>
                            <div class="copy-body">Diga adeus aos cabos e ol√° para a liberdade. Som Hi-Fi, 40h de bateria e conforto excepcional.</div>
                            <div class="copy-cta">Quero o Meu</div>
                            <div class="copy-score">
                                <span class="text-white-50 small">Score: 76%</span>
                                <div class="score-bar">
                                    <div class="score-fill medium" style="width: 76%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Preview e Conceitos de Imagem -->
            <div class="col-lg-4">
                <div class="studio-card">
                    <h5 class="text-white mb-4">
                        <i class="fas fa-eye me-2"></i>Preview do An√∫ncio
                    </h5>
                    
                    <div class="creative-preview has-content mb-4">
                        <div class="text-center">
                            <div style="width: 280px; background: #fff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
                                <div style="height: 200px; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-headphones" style="font-size: 4rem; color: rgba(255,255,255,0.9);"></i>
                                </div>
                                <div style="padding: 16px; text-align: left;">
                                    <div style="font-weight: 600; color: #1a1a2e; margin-bottom: 8px;">üéß Qualidade de Som Premium por Menos!</div>
                                    <div style="font-size: 0.875rem; color: #666; margin-bottom: 12px;">Experimente √°udio cristalino com nosso fone Bluetooth...</div>
                                    <button style="background: #1877f2; color: #fff; border: none; padding: 8px 16px; border-radius: 6px; font-weight: 600; width: 100%;">Comprar Agora</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="studio-card">
                    <h5 class="text-white mb-4">
                        <i class="fas fa-image me-2"></i>Conceitos de Imagem
                    </h5>
                    
                    <div class="image-grid">
                        <div class="image-concept selected">
                            <div class="image-placeholder">
                                <i class="fas fa-headphones"></i>
                            </div>
                            <small class="text-white-50">Produto em Destaque</small>
                        </div>
                        <div class="image-concept">
                            <div class="image-placeholder">
                                <i class="fas fa-user"></i>
                            </div>
                            <small class="text-white-50">Lifestyle</small>
                        </div>
                        <div class="image-concept">
                            <div class="image-placeholder">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <small class="text-white-50">Minimalista</small>
                        </div>
                    </div>
                </div>
                
                <!-- Teste A/B -->
                <div class="studio-card">
                    <h5 class="text-white mb-4">
                        <i class="fas fa-flask me-2"></i>Criar Teste A/B
                    </h5>
                    
                    <div class="ab-test-card">
                        <div class="ab-variant">
                            <div class="ab-variant-header">
                                <span class="ab-variant-label">
                                    <span class="badge bg-primary">A</span>
                                    Variante A
                                </span>
                                <small class="text-white-50">50% tr√°fego</small>
                            </div>
                            <small class="text-white-50">Copy #1 selecionada</small>
                        </div>
                        
                        <div class="ab-variant">
                            <div class="ab-variant-header">
                                <span class="ab-variant-label">
                                    <span class="badge bg-secondary">B</span>
                                    Variante B
                                </span>
                                <small class="text-white-50">50% tr√°fego</small>
                            </div>
                            <small class="text-white-50">Selecione uma copy</small>
                        </div>
                        
                        <button class="btn btn-outline-light w-100 mt-3">
                            <i class="fas fa-play me-2"></i>Iniciar Teste A/B
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Sele√ß√£o de plataforma
document.querySelectorAll('.platform-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        document.querySelectorAll('.platform-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
    });
});

// Sele√ß√£o de tom
document.querySelectorAll('.tone-chip').forEach(chip => {
    chip.addEventListener('click', function() {
        document.querySelectorAll('.tone-chip').forEach(c => c.classList.remove('active'));
        this.classList.add('active');
    });
});

// Sele√ß√£o de copy
document.querySelectorAll('.copy-variation').forEach(variation => {
    variation.addEventListener('click', function() {
        document.querySelectorAll('.copy-variation').forEach(v => v.classList.remove('selected'));
        this.classList.add('selected');
    });
});

// Sele√ß√£o de conceito de imagem
document.querySelectorAll('.image-concept').forEach(concept => {
    concept.addEventListener('click', function() {
        document.querySelectorAll('.image-concept').forEach(c => c.classList.remove('selected'));
        this.classList.add('selected');
    });
});

// Gerar criativos
function generateCreatives() {
    const productName = document.getElementById('productName').value;
    const productDescription = document.getElementById('productDescription').value;
    const targetAudience = document.getElementById('targetAudience').value;
    const platform = document.querySelector('.platform-btn.active').dataset.platform;
    const tone = document.querySelector('.tone-chip.active').dataset.tone;
    const numVariations = document.getElementById('numVariations').value;
    
    fetch('/api/v2/creative/generate-copy', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            product_name: productName,
            product_description: productDescription,
            target_audience: targetAudience,
            platform: platform,
            tone: tone,
            num_variations: parseInt(numVariations)
        })
    })
    .then(response => response.json())
    .then(data => {
        console.log('Criativos gerados:', data);
        // Atualizar UI com os criativos gerados
    });
}
</script>
{% endblock %}
