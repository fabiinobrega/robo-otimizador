{% extends "base_nexora.html" %}

{% block title %}Criar An√∫ncio Perfeito - NEXORA Prime{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/ad-creator/premium.css') }}">
{% endblock %}

{% block content %}
<div class="ad-creator-container">
    <div class="ad-creator-wrapper">
        
        <!-- Header -->
        <div class="mb-4">
            <h1 class="text-white mb-2" style="font-size: 2rem; font-weight: 700;">
                <i class="fas fa-magic" style="color: #6366f1;"></i>
                Criar An√∫ncio Perfeito
            </h1>
            <p class="text-gray-400 mb-0">
                Sistema mais avan√ßado de cria√ß√£o, execu√ß√£o e otimiza√ß√£o de an√∫ncios do Nexora Prime
            </p>
        </div>

        <!-- AI Status (Dynamic) -->
        <div id="aiStatus" class="ai-status" style="display: none;">
            <div class="ai-status-icon">
                <i class="fas fa-robot"></i>
            </div>
            <div class="ai-status-content">
                <h3 class="ai-status-title" id="aiStatusTitle">IA Inicializando...</h3>
                <p class="ai-status-message" id="aiStatusMessage">Preparando intelig√™ncias Velyra + Manus...</p>
            </div>
        </div>

        <!-- Wizard Steps -->
        <div class="wizard-container">
            <div class="wizard-steps">
                <div class="wizard-step active" data-step="1">
                    <div class="wizard-step-circle">1</div>
                    <div class="wizard-step-label">Configura√ß√£o</div>
                </div>
                <div class="wizard-step" data-step="2">
                    <div class="wizard-step-circle">2</div>
                    <div class="wizard-step-label">An√°lise IA</div>
                </div>
                <div class="wizard-step" data-step="3">
                    <div class="wizard-step-circle">3</div>
                    <div class="wizard-step-label">Estrat√©gia</div>
                </div>
                <div class="wizard-step" data-step="4">
                    <div class="wizard-step-circle">4</div>
                    <div class="wizard-step-label">Criativos</div>
                </div>
                <div class="wizard-step" data-step="5">
                    <div class="wizard-step-circle">5</div>
                    <div class="wizard-step-label">Pr√©-visualiza√ß√£o</div>
                </div>
                <div class="wizard-step" data-step="6">
                    <div class="wizard-step-circle">6</div>
                    <div class="wizard-step-label">Executar</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="row">
            <!-- Left Column: Form Steps -->
            <div class="col-lg-8">
                
                <!-- STEP 1: Configura√ß√£o Inicial -->
                <div class="wizard-content" id="step-1">
                    
                    <!-- P√°gina de Vendas -->
                    <div class="ad-card">
                        <div class="ad-card-header">
                            <div class="ad-card-icon">
                                <i class="fas fa-link"></i>
                            </div>
                            <div>
                                <h3 class="ad-card-title">P√°gina de Vendas</h3>
                                <p class="ad-card-subtitle">URL do produto ou landing page</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label form-label-required">URL da P√°gina de Vendas</label>
                            <input type="url" 
                                   class="form-control" 
                                   id="salesPageUrl" 
                                   placeholder="https://exemplo.com/produto"
                                   required>
                            <small class="form-help">
                                <i class="fas fa-info-circle"></i>
                                A IA analisar√° esta p√°gina para entender seu produto e criar an√∫ncios otimizados
                            </small>
                        </div>
                    </div>

                    <!-- Plataforma -->
                    <div class="ad-card">
                        <div class="ad-card-header">
                            <div class="ad-card-icon">
                                <i class="fas fa-bullhorn"></i>
                            </div>
                            <div>
                                <h3 class="ad-card-title">Plataforma de An√∫ncio</h3>
                                <p class="ad-card-subtitle">Onde voc√™ quer anunciar</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label form-label-required">Selecione a Plataforma</label>
                            <select class="form-control form-select" id="platform" required>
                                <option value="">Escolha uma plataforma...</option>
                                <option value="meta">Meta Ads (Facebook / Instagram)</option>
                                <option value="google">Google Ads</option>
                            </select>
                        </div>
                    </div>

                    <!-- Or√ßamento -->
                    <div class="ad-card">
                        <div class="ad-card-header">
                            <div class="ad-card-icon">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div>
                                <h3 class="ad-card-title">Or√ßamento</h3>
                                <p class="ad-card-subtitle">Quanto voc√™ quer investir</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label form-label-required">Tipo de Or√ßamento</label>
                                    <select class="form-control form-select" id="budgetType" required>
                                        <option value="daily">Di√°rio</option>
                                        <option value="total">Total</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label form-label-required">Valor (R$)</label>
                                    <input type="number" 
                                           class="form-control" 
                                           id="budgetAmount" 
                                           placeholder="100.00"
                                           min="10"
                                           step="0.01"
                                           required>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pa√≠s e Idioma -->
                    <div class="ad-card">
                        <div class="ad-card-header">
                            <div class="ad-card-icon">
                                <i class="fas fa-globe"></i>
                            </div>
                            <div>
                                <h3 class="ad-card-title">Localiza√ß√£o</h3>
                                <p class="ad-card-subtitle">Pa√≠s e idioma do an√∫ncio</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label form-label-required">Pa√≠s</label>
                                    <select class="form-control form-select" id="country" required>
                                        <option value="BR">Brasil</option>
                                        <option value="US">Estados Unidos</option>
                                        <option value="PT">Portugal</option>
                                        <option value="ES">Espanha</option>
                                        <option value="MX">M√©xico</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label form-label-required">Idioma</label>
                                    <select class="form-control form-select" id="language" required>
                                        <option value="pt-BR">Portugu√™s (Brasil)</option>
                                        <option value="en-US">Ingl√™s (EUA)</option>
                                        <option value="es-ES">Espanhol</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Upload de M√≠dia -->
                    <div class="ad-card">
                        <div class="ad-card-header">
                            <div class="ad-card-icon">
                                <i class="fas fa-images"></i>
                            </div>
                            <div>
                                <h3 class="ad-card-title">M√≠dias (Opcional)</h3>
                                <p class="ad-card-subtitle">Imagens ou v√≠deos para seus an√∫ncios</p>
                            </div>
                        </div>
                        <div class="upload-area" id="uploadArea">
                            <div class="upload-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <div class="upload-text">Arraste arquivos aqui ou clique para selecionar</div>
                            <div class="upload-hint">Imagens (JPG, PNG) ou V√≠deos (MP4, MOV) - M√°x. 50MB</div>
                            <input type="file" 
                                   id="mediaFiles" 
                                   multiple 
                                   accept="image/*,video/*" 
                                   style="display: none;">
                        </div>
                        <div id="uploadedFiles" class="mt-3"></div>
                    </div>

                    <!-- Modo de Opera√ß√£o -->
                    <div class="ad-card">
                        <div class="ad-card-header">
                            <div class="ad-card-icon">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <div>
                                <h3 class="ad-card-title">Modo de Opera√ß√£o</h3>
                                <p class="ad-card-subtitle">Como a IA deve trabalhar</p>
                            </div>
                        </div>
                        <div class="mode-selector">
                            <div class="mode-option active" data-mode="normal">
                                <div class="mode-option-icon">‚≠ï</div>
                                <div class="mode-option-title">Modo Normal</div>
                                <div class="mode-option-description">
                                    Abordagem est√°vel e segura. Ideal para testar e aprender.
                                </div>
                            </div>
                            <div class="mode-option" data-mode="turbo">
                                <div class="mode-option-icon">üî•</div>
                                <div class="mode-option-title">Modo Escala Agressiva</div>
                                <div class="mode-option-description">
                                    Testes r√°pidos, cortes agressivos, foco em ROI m√°ximo.
                                </div>
                            </div>
                        </div>
                        <input type="hidden" id="operationMode" value="normal">
                    </div>

                    <!-- Actions -->
                    <div class="d-flex justify-content-between mt-4">
                        <button type="button" class="btn btn-secondary" disabled>
                            <i class="fas fa-arrow-left"></i>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-primary btn-lg" id="btnStep1Next">
                            Iniciar An√°lise IA
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- STEP 2: An√°lise IA (ser√° exibido dinamicamente) -->
                <div class="wizard-content" id="step-2" style="display: none;">
                    <div class="ad-card">
                        <div class="ad-card-header">
                            <div class="ad-card-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div>
                                <h3 class="ad-card-title">IA Analisando...</h3>
                                <p class="ad-card-subtitle">Velyra + Manus trabalhando</p>
                            </div>
                        </div>
                        <div id="analysisProgress">
                            <!-- Progresso ser√° inserido via JavaScript -->
                        </div>
                    </div>
                    <!-- Bot√µes de navega√ß√£o Step 2 -->
                    <div class="d-flex justify-content-between mt-4" id="step2Navigation" style="display: none;">
                        <button type="button" class="btn btn-secondary" onclick="window.adCreatorEngine.goToStep(1)">
                            <i class="fas fa-arrow-left"></i>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-primary btn-lg" id="btnStep2Next" onclick="window.adCreatorEngine.goToStep(3)">
                            Continuar para Estrat√©gia
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- STEP 3: Estrat√©gia -->
                <div class="wizard-content" id="step-3" style="display: none;">
                    <div class="ad-card">
                        <div class="ad-card-header">
                            <div class="ad-card-icon">
                                <i class="fas fa-chess"></i>
                            </div>
                            <div>
                                <h3 class="ad-card-title">Estrat√©gia de Campanha</h3>
                                <p class="ad-card-subtitle">Defina como sua campanha ser√° executada</p>
                            </div>
                        </div>
                        <div id="strategyContent">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">Objetivo da Campanha</label>
                                        <select class="form-control form-select" id="campaignObjective">
                                            <option value="conversions">Convers√µes</option>
                                            <option value="traffic">Tr√°fego</option>
                                            <option value="engagement">Engajamento</option>
                                            <option value="awareness">Reconhecimento</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">P√∫blico-Alvo</label>
                                        <select class="form-control form-select" id="targetAudience">
                                            <option value="broad">Amplo (Recomendado pela IA)</option>
                                            <option value="interest">Por Interesses</option>
                                            <option value="lookalike">Lookalike</option>
                                            <option value="custom">Personalizado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group mt-3">
                                <label class="form-label">Dura√ß√£o da Campanha</label>
                                <div class="row">
                                    <div class="col-md-6">
                                        <input type="date" class="form-control" id="startDate" placeholder="Data de in√≠cio">
                                    </div>
                                    <div class="col-md-6">
                                        <input type="date" class="form-control" id="endDate" placeholder="Data de t√©rmino">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between mt-4">
                        <button type="button" class="btn btn-secondary" onclick="window.adCreatorEngine.goToStep(2)">
                            <i class="fas fa-arrow-left"></i>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-primary btn-lg" onclick="window.adCreatorEngine.goToStep(4)">
                            Continuar para Criativos
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- STEP 4: Criativos -->
                <div class="wizard-content" id="step-4" style="display: none;">
                    <div class="ad-card">
                        <div class="ad-card-header">
                            <div class="ad-card-icon">
                                <i class="fas fa-palette"></i>
                            </div>
                            <div>
                                <h3 class="ad-card-title">Criativos do An√∫ncio</h3>
                                <p class="ad-card-subtitle">Textos e visuais gerados pela IA</p>
                            </div>
                        </div>
                        <div id="creativesContent">
                            <div class="form-group">
                                <label class="form-label">T√≠tulo Principal</label>
                                <input type="text" class="form-control" id="adHeadline" placeholder="T√≠tulo do an√∫ncio">
                            </div>
                            <div class="form-group mt-3">
                                <label class="form-label">Texto do An√∫ncio</label>
                                <textarea class="form-control" id="adText" rows="4" placeholder="Texto principal do an√∫ncio"></textarea>
                            </div>
                            <div class="form-group mt-3">
                                <label class="form-label">Call to Action</label>
                                <select class="form-control form-select" id="adCTA">
                                    <option value="LEARN_MORE">Saiba Mais</option>
                                    <option value="SHOP_NOW">Comprar Agora</option>
                                    <option value="SIGN_UP">Cadastre-se</option>
                                    <option value="CONTACT_US">Fale Conosco</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between mt-4">
                        <button type="button" class="btn btn-secondary" onclick="window.adCreatorEngine.goToStep(3)">
                            <i class="fas fa-arrow-left"></i>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-primary btn-lg" onclick="window.adCreatorEngine.goToStep(5)">
                            Pr√©-visualizar
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- STEP 5: Pr√©-visualiza√ß√£o -->
                <div class="wizard-content" id="step-5" style="display: none;">
                    <div class="ad-card">
                        <div class="ad-card-header">
                            <div class="ad-card-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div>
                                <h3 class="ad-card-title">Pr√©-visualiza√ß√£o</h3>
                                <p class="ad-card-subtitle">Veja como seu an√∫ncio ficar√°</p>
                            </div>
                        </div>
                        <div id="previewContent">
                            <div class="ad-preview-container" style="background: #f0f2f5; border-radius: 12px; padding: 20px; max-width: 500px; margin: 0 auto;">
                                <div class="ad-preview-header" style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                    <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #6366f1, #8b5cf6); border-radius: 50%;"></div>
                                    <div>
                                        <div style="font-weight: 600; color: #1a1a1a;">Sua Empresa</div>
                                        <div style="font-size: 12px; color: #65676b;">Patrocinado</div>
                                    </div>
                                </div>
                                <div id="previewText" style="color: #1a1a1a; margin-bottom: 15px;">Texto do an√∫ncio aparecer√° aqui...</div>
                                <div id="previewImage" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 250px; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">Imagem/V√≠deo do An√∫ncio</div>
                                <div id="previewCTA" style="margin-top: 15px;">
                                    <button style="width: 100%; padding: 12px; background: #6366f1; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">Saiba Mais</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between mt-4">
                        <button type="button" class="btn btn-secondary" onclick="window.adCreatorEngine.goToStep(4)">
                            <i class="fas fa-arrow-left"></i>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-success btn-lg" onclick="window.adCreatorEngine.goToStep(6)">
                            <i class="fas fa-rocket"></i>
                            Executar Campanha
                        </button>
                    </div>
                </div>

                <!-- STEP 6: Executar -->
                <div class="wizard-content" id="step-6" style="display: none;">
                    <div class="ad-card">
                        <div class="ad-card-header">
                            <div class="ad-card-icon">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <div>
                                <h3 class="ad-card-title">Executar Campanha</h3>
                                <p class="ad-card-subtitle">Confirme e lance sua campanha</p>
                            </div>
                        </div>
                        <div id="executeContent">
                            <div class="alert alert-info" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); color: #3b82f6;">
                                <i class="fas fa-info-circle me-2"></i>
                                <strong>Importante:</strong> Para executar campanhas reais, voc√™ precisa conectar sua conta de an√∫ncios nas Configura√ß√µes > Integra√ß√µes.
                            </div>
                            <div class="mt-4" id="executionSummary">
                                <h5 style="color: var(--nexora-white, #fff);">Resumo da Campanha</h5>
                                <div class="p-3" style="background: var(--nexora-gray-800, #1f2937); border-radius: 8px;">
                                    <p style="color: var(--nexora-gray-300, #d1d5db);">Os detalhes da sua campanha aparecer√£o aqui...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between mt-4">
                        <button type="button" class="btn btn-secondary" onclick="window.adCreatorEngine.goToStep(5)">
                            <i class="fas fa-arrow-left"></i>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-success btn-lg" id="btnExecuteCampaign" onclick="window.adCreatorEngine.executeCampaign()">
                            <i class="fas fa-play"></i>
                            Lan√ßar Campanha
                        </button>
                    </div>
                </div>

            </div>

            <!-- Right Column: Resumo e Pr√©-visualiza√ß√£o -->
            <div class="col-lg-4">
                <div class="ad-card" style="position: sticky; top: 2rem;">
                    <div class="ad-card-header">
                        <div class="ad-card-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div>
                            <h3 class="ad-card-title">Resumo</h3>
                            <p class="ad-card-subtitle">Configura√ß√£o atual</p>
                        </div>
                    </div>
                    <div id="summaryContent">
                        <p class="text-gray-400 text-center py-4">
                            <i class="fas fa-info-circle"></i><br>
                            Preencha os campos para ver o resumo
                        </p>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/ad-creator/engine.js') }}"></script>
{% endblock %}
