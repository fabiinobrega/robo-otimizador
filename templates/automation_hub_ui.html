{% extends "base_nexora.html" %}

{% block title %}Automation Hub - NEXORA{% endblock %}

{% block extra_head %}
<style>
    /* ============================================
       AUTOMATION HUB UI - DESIGN PREMIUM
       ============================================ */
    .automation-container {
        padding: var(--spacing-6);
        max-width: 1400px;
        margin: 0 auto;
    }

    .automation-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--spacing-6);
    }

    .automation-title {
        display: flex;
        align-items: center;
        gap: var(--spacing-3);
    }

    .automation-title h1 {
        font-size: var(--text-2xl);
        font-weight: 700;
        color: var(--text-primary);
        margin: 0;
    }

    .automation-title-icon {
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #8b5cf6, #6366f1);
        border-radius: var(--radius-xl);
        color: var(--text-on-accent);
        font-size: var(--text-xl);
    }

    /* Stats Overview */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--spacing-4);
        margin-bottom: var(--spacing-6);
    }

    .stat-card {
        background-color: var(--bg-secondary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-xl);
        padding: var(--spacing-5);
        text-align: center;
    }

    .stat-icon {
        width: 48px;
        height: 48px;
        margin: 0 auto var(--spacing-3);
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: var(--radius-lg);
        font-size: var(--text-xl);
    }

    .stat-icon.purple {
        background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(99, 102, 241, 0.1));
        color: #8b5cf6;
    }

    .stat-icon.green {
        background-color: rgba(34, 197, 94, 0.1);
        color: var(--accent-success);
    }

    .stat-icon.blue {
        background-color: rgba(59, 130, 246, 0.1);
        color: var(--accent-info);
    }

    .stat-icon.orange {
        background-color: rgba(249, 115, 22, 0.1);
        color: var(--accent-warning);
    }

    .stat-value {
        font-size: var(--text-2xl);
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: var(--spacing-1);
    }

    .stat-label {
        font-size: var(--text-sm);
        color: var(--text-secondary);
    }

    /* Automation Categories */
    .categories-section {
        margin-bottom: var(--spacing-6);
    }

    .categories-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--spacing-4);
    }

    .categories-title {
        font-size: var(--text-lg);
        font-weight: 600;
        color: var(--text-primary);
    }

    .categories-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: var(--spacing-4);
    }

    .category-card {
        background-color: var(--bg-secondary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-xl);
        padding: var(--spacing-5);
        cursor: pointer;
        transition: all var(--transition-fast);
    }

    .category-card:hover {
        border-color: var(--accent-primary);
        transform: translateY(-2px);
    }

    .category-header {
        display: flex;
        align-items: center;
        gap: var(--spacing-3);
        margin-bottom: var(--spacing-3);
    }

    .category-icon {
        width: 44px;
        height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: var(--radius-lg);
        font-size: var(--text-lg);
    }

    .category-icon.budget { background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.1)); color: var(--accent-success); }
    .category-icon.creative { background: linear-gradient(135deg, rgba(236, 72, 153, 0.1), rgba(244, 114, 182, 0.1)); color: #ec4899; }
    .category-icon.audience { background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(96, 165, 250, 0.1)); color: var(--accent-info); }
    .category-icon.alert { background: linear-gradient(135deg, rgba(249, 115, 22, 0.1), rgba(251, 146, 60, 0.1)); color: var(--accent-warning); }
    .category-icon.report { background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(167, 139, 250, 0.1)); color: #8b5cf6; }
    .category-icon.protection { background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(248, 113, 113, 0.1)); color: var(--accent-danger); }

    .category-info h3 {
        font-size: var(--text-base);
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: var(--spacing-1);
    }

    .category-info p {
        font-size: var(--text-xs);
        color: var(--text-secondary);
        margin: 0;
    }

    .category-stats {
        display: flex;
        gap: var(--spacing-4);
        padding-top: var(--spacing-3);
        border-top: 1px solid var(--border-primary);
    }

    .category-stat {
        text-align: center;
        flex: 1;
    }

    .category-stat-value {
        font-size: var(--text-lg);
        font-weight: 700;
        color: var(--accent-primary);
    }

    .category-stat-label {
        font-size: 10px;
        color: var(--text-tertiary);
    }

    /* Active Rules Section */
    .rules-section {
        background-color: var(--bg-secondary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-xl);
        padding: var(--spacing-6);
        margin-bottom: var(--spacing-6);
    }

    .rules-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--spacing-4);
    }

    .rules-title {
        display: flex;
        align-items: center;
        gap: var(--spacing-2);
        font-size: var(--text-lg);
        font-weight: 600;
        color: var(--text-primary);
    }

    .rules-title i {
        color: var(--accent-success);
    }

    .rules-filters {
        display: flex;
        gap: var(--spacing-2);
    }

    .filter-btn {
        padding: var(--spacing-2) var(--spacing-3);
        background-color: var(--fill-primary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-md);
        color: var(--text-secondary);
        font-size: var(--text-xs);
        font-weight: 500;
        cursor: pointer;
        transition: all var(--transition-fast);
    }

    .filter-btn.active {
        background-color: var(--accent-primary);
        border-color: var(--accent-primary);
        color: var(--text-on-accent);
    }

    .rules-list {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-3);
    }

    .rule-card {
        display: flex;
        align-items: center;
        gap: var(--spacing-4);
        padding: var(--spacing-4);
        background-color: var(--bg-tertiary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-lg);
    }

    .rule-toggle {
        position: relative;
        width: 48px;
        height: 24px;
        background-color: var(--fill-secondary);
        border-radius: var(--radius-full);
        cursor: pointer;
        transition: all var(--transition-fast);
        flex-shrink: 0;
    }

    .rule-toggle.active {
        background-color: var(--accent-success);
    }

    .rule-toggle::after {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 20px;
        height: 20px;
        background-color: white;
        border-radius: var(--radius-full);
        transition: all var(--transition-fast);
    }

    .rule-toggle.active::after {
        left: 26px;
    }

    .rule-icon {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: var(--radius-lg);
        flex-shrink: 0;
    }

    .rule-content {
        flex: 1;
    }

    .rule-name {
        font-size: var(--text-sm);
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: var(--spacing-1);
    }

    .rule-condition {
        font-size: var(--text-xs);
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        gap: var(--spacing-2);
    }

    .rule-condition code {
        padding: 2px 6px;
        background-color: var(--fill-primary);
        border-radius: var(--radius-sm);
        font-family: monospace;
        font-size: 10px;
    }

    .rule-stats {
        display: flex;
        gap: var(--spacing-6);
    }

    .rule-stat {
        text-align: center;
    }

    .rule-stat-value {
        font-size: var(--text-sm);
        font-weight: 700;
        color: var(--accent-success);
    }

    .rule-stat-label {
        font-size: 10px;
        color: var(--text-tertiary);
    }

    .rule-actions {
        display: flex;
        gap: var(--spacing-2);
    }

    .rule-action-btn {
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--fill-primary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-md);
        color: var(--text-secondary);
        cursor: pointer;
        transition: all var(--transition-fast);
    }

    .rule-action-btn:hover {
        background-color: var(--accent-primary);
        border-color: var(--accent-primary);
        color: var(--text-on-accent);
    }

    /* Rule Builder */
    .builder-section {
        background: linear-gradient(135deg, rgba(139, 92, 246, 0.05), rgba(99, 102, 241, 0.1));
        border: 1px solid #8b5cf6;
        border-radius: var(--radius-xl);
        padding: var(--spacing-6);
        margin-bottom: var(--spacing-6);
    }

    .builder-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--spacing-6);
    }

    .builder-title {
        display: flex;
        align-items: center;
        gap: var(--spacing-2);
        font-size: var(--text-lg);
        font-weight: 600;
        color: var(--text-primary);
    }

    .builder-title i {
        color: #8b5cf6;
    }

    .builder-steps {
        display: flex;
        gap: var(--spacing-2);
        margin-bottom: var(--spacing-6);
    }

    .builder-step {
        flex: 1;
        display: flex;
        align-items: center;
        gap: var(--spacing-2);
        padding: var(--spacing-3);
        background-color: var(--bg-secondary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-lg);
        font-size: var(--text-sm);
        color: var(--text-secondary);
    }

    .builder-step.active {
        border-color: #8b5cf6;
        background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(99, 102, 241, 0.1));
        color: var(--text-primary);
    }

    .builder-step.completed {
        border-color: var(--accent-success);
        background-color: rgba(34, 197, 94, 0.1);
    }

    .builder-step-number {
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--fill-primary);
        border-radius: var(--radius-full);
        font-size: var(--text-xs);
        font-weight: 700;
    }

    .builder-step.active .builder-step-number {
        background: linear-gradient(135deg, #8b5cf6, #6366f1);
        color: white;
    }

    .builder-step.completed .builder-step-number {
        background-color: var(--accent-success);
        color: white;
    }

    .builder-form {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--spacing-6);
    }

    .builder-field {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-2);
    }

    .builder-label {
        font-size: var(--text-sm);
        font-weight: 500;
        color: var(--text-secondary);
    }

    .builder-select, .builder-input {
        padding: var(--spacing-3) var(--spacing-4);
        background-color: var(--bg-secondary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-lg);
        color: var(--text-primary);
        font-size: var(--text-sm);
    }

    .builder-select:focus, .builder-input:focus {
        outline: none;
        border-color: #8b5cf6;
    }

    /* Templates Section */
    .templates-section {
        background-color: var(--bg-secondary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-xl);
        padding: var(--spacing-6);
        margin-bottom: var(--spacing-6);
    }

    .templates-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--spacing-4);
    }

    .templates-title {
        display: flex;
        align-items: center;
        gap: var(--spacing-2);
        font-size: var(--text-lg);
        font-weight: 600;
        color: var(--text-primary);
    }

    .templates-title i {
        color: var(--accent-warning);
    }

    .templates-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: var(--spacing-4);
    }

    .template-card {
        padding: var(--spacing-4);
        background-color: var(--bg-tertiary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-lg);
        cursor: pointer;
        transition: all var(--transition-fast);
    }

    .template-card:hover {
        border-color: var(--accent-primary);
    }

    .template-header {
        display: flex;
        align-items: center;
        gap: var(--spacing-2);
        margin-bottom: var(--spacing-2);
    }

    .template-icon {
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--fill-primary);
        border-radius: var(--radius-md);
        color: var(--accent-primary);
    }

    .template-name {
        font-size: var(--text-sm);
        font-weight: 600;
        color: var(--text-primary);
    }

    .template-desc {
        font-size: var(--text-xs);
        color: var(--text-secondary);
        margin-bottom: var(--spacing-3);
    }

    .template-badge {
        display: inline-flex;
        align-items: center;
        gap: var(--spacing-1);
        padding: 2px 8px;
        background-color: rgba(34, 197, 94, 0.1);
        border-radius: var(--radius-full);
        font-size: 10px;
        font-weight: 600;
        color: var(--accent-success);
    }

    /* Execution Log */
    .log-section {
        background-color: var(--bg-secondary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-xl);
        padding: var(--spacing-6);
    }

    .log-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--spacing-4);
    }

    .log-title {
        display: flex;
        align-items: center;
        gap: var(--spacing-2);
        font-size: var(--text-lg);
        font-weight: 600;
        color: var(--text-primary);
    }

    .log-title i {
        color: var(--accent-info);
    }

    .log-list {
        max-height: 300px;
        overflow-y: auto;
    }

    .log-item {
        display: flex;
        align-items: flex-start;
        gap: var(--spacing-3);
        padding: var(--spacing-3);
        border-bottom: 1px solid var(--border-primary);
    }

    .log-item:last-child {
        border-bottom: none;
    }

    .log-icon {
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: var(--radius-md);
        flex-shrink: 0;
        font-size: var(--text-xs);
    }

    .log-icon.success { background-color: rgba(34, 197, 94, 0.1); color: var(--accent-success); }
    .log-icon.warning { background-color: rgba(249, 115, 22, 0.1); color: var(--accent-warning); }
    .log-icon.info { background-color: rgba(59, 130, 246, 0.1); color: var(--accent-info); }
    .log-icon.error { background-color: rgba(239, 68, 68, 0.1); color: var(--accent-danger); }

    .log-content {
        flex: 1;
    }

    .log-message {
        font-size: var(--text-sm);
        color: var(--text-primary);
        margin-bottom: var(--spacing-1);
    }

    .log-details {
        font-size: var(--text-xs);
        color: var(--text-secondary);
    }

    .log-time {
        font-size: var(--text-xs);
        color: var(--text-tertiary);
        white-space: nowrap;
    }
</style>
{% endblock %}

{% block content %}
<div class="automation-container">
    <!-- Header -->
    <div class="automation-header">
        <div class="automation-title">
            <div class="automation-title-icon">
                <i class="fas fa-magic"></i>
            </div>
            <div>
                <h1>Automation Hub</h1>
                <p style="color: var(--text-secondary); font-size: var(--text-sm); margin: 0;">
                    Central de regras e automações inteligentes
                </p>
            </div>
        </div>
        <div class="hub-actions">
            <button class="btn-nexora btn-nexora-secondary">
                <i class="fas fa-history"></i> Histórico
            </button>
            <button class="btn-nexora btn-nexora-primary">
                <i class="fas fa-plus"></i> Nova Regra
            </button>
        </div>
    </div>

    <!-- Stats Overview -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon purple"><i class="fas fa-cogs"></i></div>
            <div class="stat-value">24</div>
            <div class="stat-label">Regras Ativas</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon green"><i class="fas fa-check-circle"></i></div>
            <div class="stat-value">1.847</div>
            <div class="stat-label">Execuções Hoje</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon blue"><i class="fas fa-dollar-sign"></i></div>
            <div class="stat-value">R$ 24.5k</div>
            <div class="stat-label">Economia Gerada</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon orange"><i class="fas fa-clock"></i></div>
            <div class="stat-value">127h</div>
            <div class="stat-label">Tempo Economizado</div>
        </div>
    </div>

    <!-- Automation Categories -->
    <div class="categories-section">
        <div class="categories-header">
            <span class="categories-title">Categorias de Automação</span>
        </div>
        <div class="categories-grid">
            <div class="category-card">
                <div class="category-header">
                    <div class="category-icon budget"><i class="fas fa-dollar-sign"></i></div>
                    <div class="category-info">
                        <h3>Gestão de Budget</h3>
                        <p>Escala, pausa e ajusta orçamentos automaticamente</p>
                    </div>
                </div>
                <div class="category-stats">
                    <div class="category-stat">
                        <div class="category-stat-value">8</div>
                        <div class="category-stat-label">Regras</div>
                    </div>
                    <div class="category-stat">
                        <div class="category-stat-value">423</div>
                        <div class="category-stat-label">Execuções</div>
                    </div>
                </div>
            </div>
            <div class="category-card">
                <div class="category-header">
                    <div class="category-icon creative"><i class="fas fa-palette"></i></div>
                    <div class="category-info">
                        <h3>Gestão de Criativos</h3>
                        <p>Rotaciona e otimiza criativos automaticamente</p>
                    </div>
                </div>
                <div class="category-stats">
                    <div class="category-stat">
                        <div class="category-stat-value">5</div>
                        <div class="category-stat-label">Regras</div>
                    </div>
                    <div class="category-stat">
                        <div class="category-stat-value">156</div>
                        <div class="category-stat-label">Execuções</div>
                    </div>
                </div>
            </div>
            <div class="category-card">
                <div class="category-header">
                    <div class="category-icon audience"><i class="fas fa-users"></i></div>
                    <div class="category-info">
                        <h3>Gestão de Público</h3>
                        <p>Expande e refina públicos automaticamente</p>
                    </div>
                </div>
                <div class="category-stats">
                    <div class="category-stat">
                        <div class="category-stat-value">4</div>
                        <div class="category-stat-label">Regras</div>
                    </div>
                    <div class="category-stat">
                        <div class="category-stat-value">89</div>
                        <div class="category-stat-label">Execuções</div>
                    </div>
                </div>
            </div>
            <div class="category-card">
                <div class="category-header">
                    <div class="category-icon alert"><i class="fas fa-bell"></i></div>
                    <div class="category-info">
                        <h3>Alertas & Notificações</h3>
                        <p>Monitora métricas e envia alertas</p>
                    </div>
                </div>
                <div class="category-stats">
                    <div class="category-stat">
                        <div class="category-stat-value">3</div>
                        <div class="category-stat-label">Regras</div>
                    </div>
                    <div class="category-stat">
                        <div class="category-stat-value">67</div>
                        <div class="category-stat-label">Execuções</div>
                    </div>
                </div>
            </div>
            <div class="category-card">
                <div class="category-header">
                    <div class="category-icon report"><i class="fas fa-file-alt"></i></div>
                    <div class="category-info">
                        <h3>Relatórios Automáticos</h3>
                        <p>Gera e envia relatórios programados</p>
                    </div>
                </div>
                <div class="category-stats">
                    <div class="category-stat">
                        <div class="category-stat-value">2</div>
                        <div class="category-stat-label">Regras</div>
                    </div>
                    <div class="category-stat">
                        <div class="category-stat-value">30</div>
                        <div class="category-stat-label">Execuções</div>
                    </div>
                </div>
            </div>
            <div class="category-card">
                <div class="category-header">
                    <div class="category-icon protection"><i class="fas fa-shield-alt"></i></div>
                    <div class="category-info">
                        <h3>Proteção de Conta</h3>
                        <p>Monitora e protege contra riscos</p>
                    </div>
                </div>
                <div class="category-stats">
                    <div class="category-stat">
                        <div class="category-stat-value">2</div>
                        <div class="category-stat-label">Regras</div>
                    </div>
                    <div class="category-stat">
                        <div class="category-stat-value">12</div>
                        <div class="category-stat-label">Execuções</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Rule Builder -->
    <div class="builder-section">
        <div class="builder-header">
            <div class="builder-title">
                <i class="fas fa-hammer"></i> Construtor de Regras
            </div>
        </div>
        <div class="builder-steps">
            <div class="builder-step completed">
                <span class="builder-step-number"><i class="fas fa-check"></i></span>
                Gatilho
            </div>
            <div class="builder-step active">
                <span class="builder-step-number">2</span>
                Condição
            </div>
            <div class="builder-step">
                <span class="builder-step-number">3</span>
                Ação
            </div>
            <div class="builder-step">
                <span class="builder-step-number">4</span>
                Revisar
            </div>
        </div>
        <div class="builder-form">
            <div class="builder-field">
                <label class="builder-label">Quando</label>
                <select class="builder-select">
                    <option>CPA ultrapassar valor</option>
                    <option>ROAS cair abaixo de</option>
                    <option>CTR cair abaixo de</option>
                    <option>Frequência ultrapassar</option>
                    <option>Budget atingir limite</option>
                </select>
            </div>
            <div class="builder-field">
                <label class="builder-label">Operador</label>
                <select class="builder-select">
                    <option>Maior que</option>
                    <option>Menor que</option>
                    <option>Igual a</option>
                    <option>Entre</option>
                </select>
            </div>
            <div class="builder-field">
                <label class="builder-label">Valor</label>
                <input type="text" class="builder-input" placeholder="Ex: R$ 50 ou 2.5x">
            </div>
            <div class="builder-field">
                <label class="builder-label">Período de Análise</label>
                <select class="builder-select">
                    <option>Últimas 24 horas</option>
                    <option>Últimos 3 dias</option>
                    <option>Últimos 7 dias</option>
                    <option>Últimos 14 dias</option>
                </select>
            </div>
        </div>
        <div style="display: flex; justify-content: flex-end; gap: var(--spacing-3); margin-top: var(--spacing-6);">
            <button class="btn-nexora btn-nexora-secondary">Cancelar</button>
            <button class="btn-nexora btn-nexora-primary">Próximo Passo</button>
        </div>
    </div>

    <!-- Active Rules -->
    <div class="rules-section">
        <div class="rules-header">
            <div class="rules-title">
                <i class="fas fa-check-circle"></i> Regras Ativas
            </div>
            <div class="rules-filters">
                <button class="filter-btn active">Todas</button>
                <button class="filter-btn">Budget</button>
                <button class="filter-btn">Criativos</button>
                <button class="filter-btn">Público</button>
            </div>
        </div>
        <div class="rules-list">
            <div class="rule-card">
                <div class="rule-toggle active" onclick="this.classList.toggle('active')"></div>
                <div class="rule-icon budget"><i class="fas fa-dollar-sign"></i></div>
                <div class="rule-content">
                    <div class="rule-name">Pausar CPA Alto</div>
                    <div class="rule-condition">
                        SE <code>CPA > R$ 50</code> POR <code>24h</code> ENTÃO <code>Pausar anúncio</code>
                    </div>
                </div>
                <div class="rule-stats">
                    <div class="rule-stat">
                        <div class="rule-stat-value">127</div>
                        <div class="rule-stat-label">Execuções</div>
                    </div>
                    <div class="rule-stat">
                        <div class="rule-stat-value">R$ 4.2k</div>
                        <div class="rule-stat-label">Economia</div>
                    </div>
                </div>
                <div class="rule-actions">
                    <button class="rule-action-btn"><i class="fas fa-edit"></i></button>
                    <button class="rule-action-btn"><i class="fas fa-trash"></i></button>
                </div>
            </div>
            <div class="rule-card">
                <div class="rule-toggle active" onclick="this.classList.toggle('active')"></div>
                <div class="rule-icon budget"><i class="fas fa-arrow-up"></i></div>
                <div class="rule-content">
                    <div class="rule-name">Escalar Vencedores</div>
                    <div class="rule-condition">
                        SE <code>ROAS > 3x</code> POR <code>3 dias</code> ENTÃO <code>Aumentar 20%</code>
                    </div>
                </div>
                <div class="rule-stats">
                    <div class="rule-stat">
                        <div class="rule-stat-value">45</div>
                        <div class="rule-stat-label">Execuções</div>
                    </div>
                    <div class="rule-stat">
                        <div class="rule-stat-value">+R$ 8.7k</div>
                        <div class="rule-stat-label">Receita</div>
                    </div>
                </div>
                <div class="rule-actions">
                    <button class="rule-action-btn"><i class="fas fa-edit"></i></button>
                    <button class="rule-action-btn"><i class="fas fa-trash"></i></button>
                </div>
            </div>
            <div class="rule-card">
                <div class="rule-toggle active" onclick="this.classList.toggle('active')"></div>
                <div class="rule-icon creative"><i class="fas fa-sync-alt"></i></div>
                <div class="rule-content">
                    <div class="rule-name">Rotacionar Criativos Fadigados</div>
                    <div class="rule-condition">
                        SE <code>CTR cair 30%</code> EM <code>7 dias</code> ENTÃO <code>Substituir criativo</code>
                    </div>
                </div>
                <div class="rule-stats">
                    <div class="rule-stat">
                        <div class="rule-stat-value">23</div>
                        <div class="rule-stat-label">Execuções</div>
                    </div>
                    <div class="rule-stat">
                        <div class="rule-stat-value">+15%</div>
                        <div class="rule-stat-label">CTR</div>
                    </div>
                </div>
                <div class="rule-actions">
                    <button class="rule-action-btn"><i class="fas fa-edit"></i></button>
                    <button class="rule-action-btn"><i class="fas fa-trash"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Templates -->
    <div class="templates-section">
        <div class="templates-header">
            <div class="templates-title">
                <i class="fas fa-copy"></i> Templates Prontos
            </div>
        </div>
        <div class="templates-grid">
            <div class="template-card">
                <div class="template-header">
                    <div class="template-icon"><i class="fas fa-shield-alt"></i></div>
                    <span class="template-name">Proteção de Budget</span>
                </div>
                <div class="template-desc">Pausa campanhas automaticamente quando CPA ultrapassa limite</div>
                <span class="template-badge"><i class="fas fa-star"></i> Popular</span>
            </div>
            <div class="template-card">
                <div class="template-header">
                    <div class="template-icon"><i class="fas fa-rocket"></i></div>
                    <span class="template-name">Escala Inteligente</span>
                </div>
                <div class="template-desc">Aumenta budget de campanhas com ROAS consistente</div>
                <span class="template-badge"><i class="fas fa-star"></i> Recomendado</span>
            </div>
            <div class="template-card">
                <div class="template-header">
                    <div class="template-icon"><i class="fas fa-palette"></i></div>
                    <span class="template-name">Rotação de Criativos</span>
                </div>
                <div class="template-desc">Substitui criativos com CTR em queda</div>
                <span class="template-badge"><i class="fas fa-check"></i> Testado</span>
            </div>
            <div class="template-card">
                <div class="template-header">
                    <div class="template-icon"><i class="fas fa-bell"></i></div>
                    <span class="template-name">Alertas de Performance</span>
                </div>
                <div class="template-desc">Notifica quando métricas saem do padrão</div>
                <span class="template-badge"><i class="fas fa-check"></i> Essencial</span>
            </div>
        </div>
    </div>

    <!-- Execution Log -->
    <div class="log-section">
        <div class="log-header">
            <div class="log-title">
                <i class="fas fa-terminal"></i> Log de Execuções
            </div>
            <button class="btn-nexora btn-nexora-secondary btn-sm">
                <i class="fas fa-download"></i> Exportar
            </button>
        </div>
        <div class="log-list">
            <div class="log-item">
                <div class="log-icon success"><i class="fas fa-check"></i></div>
                <div class="log-content">
                    <div class="log-message">Regra "Pausar CPA Alto" executada</div>
                    <div class="log-details">Anúncio "Video_v2" pausado • CPA: R$ 68</div>
                </div>
                <span class="log-time">14:32:15</span>
            </div>
            <div class="log-item">
                <div class="log-icon success"><i class="fas fa-check"></i></div>
                <div class="log-content">
                    <div class="log-message">Regra "Escalar Vencedores" executada</div>
                    <div class="log-details">Campanha "Lançamento_X" budget +20% • ROAS: 4.2x</div>
                </div>
                <span class="log-time">14:28:30</span>
            </div>
            <div class="log-item">
                <div class="log-icon warning"><i class="fas fa-exclamation"></i></div>
                <div class="log-content">
                    <div class="log-message">Alerta de frequência alta</div>
                    <div class="log-details">Campanha "Remarketing" frequência 4.2 • Limite: 3.0</div>
                </div>
                <span class="log-time">14:15:00</span>
            </div>
            <div class="log-item">
                <div class="log-icon info"><i class="fas fa-info"></i></div>
                <div class="log-content">
                    <div class="log-message">Verificação de regras concluída</div>
                    <div class="log-details">24 regras verificadas • 3 ações executadas</div>
                </div>
                <span class="log-time">14:00:00</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}
